!function(e,t,a){"use strict";var r=t.module("nx.solrajax",["ngSanitize","ui.bootstrap.datepicker","ui.bootstrap.typeahead","nx.angular.variables"]);r.config(["$routeProvider","nxConfigurationServiceProvider",function(e,t){e.when("/search/:path*",{controller:"SearchResultCtrl",templateUrl:t.value("nx.solrajax.searchresult.templateUrl"),resolve:{searchResponse:["$location","$http",function(e,t){return t.get(e.path(),{params:e.search()})}]}})}]),r.controller("SearchResultCtrl",["searchResponse","$http","$location","$scope","dateFilter",function(e,a,r,n,s){n.showFacetFilters=!1,n.loading=!1,n.q="",n.facets=e.data.facets,n.results=e.data.result,n.search=e.data.search,n.autoSuggestion=function(e){return a.get(n.search.suggestUrl,{params:{q:e}}).then(function(e){return e.data.results})},n.submitSearch=function(){var e=n.q.name||n.q;r.path(n.search.url+"?q="+e)},n.removeSearch=function(){r.path(n.search.url)},n.select=function(e){r.path(e)},n.selectDate=function(e){var t,a,n;t=e.start?s(e.start,"yyyyMMdd"):"*",a=e.end?s(e.end,"yyyyMMdd"):"*",n=e.start||e.end?decodeURI(e.url).replace(encodeURI("{filterValue}"),encodeURI(t+e.delimiter+a)):e.reseturl,r.path(n)},n.removeStartDate=function(e){e.start="",n.selectDate(e)},n.removeEndDate=function(e){e.end="",n.selectDate(e)},n.isDateSelected=function(){var e=!1;return t.forEach(n.facets.availableFacets,function(t){"queryGroup"!==t.type&&"dateRange"!==t.type||!t.active||(e=!0)}),e},n.loadPrev=function(){n.loading=!0,a.get(n.results.prevLink).then(function(e){n.results.prevLink=e.data.result.prevLink||"",t.forEach(e.data.result.resultDocuments.reverse(),function(e){n.results.resultDocuments.unshift(e)}),n.loading=!1})},n.loadNext=function(){n.loading=!0,a.get(n.results.nextLink,{cache:!0}).then(function(e){r.replace(n.results.nextLink),n.results.nextLink=e.data.result.nextLink||"",t.forEach(e.data.result.resultDocuments,function(e){n.results.resultDocuments.push(e)}),n.loading=!1})}}])}(window,angular);
//# sourceMappingURL=./Solrajax.min.map