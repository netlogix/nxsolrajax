(function(e,t,n){"use strict";var r=t.module("nx.solrajax",["ngSanitize","ui.bootstrap.datepicker"]);r.run(["$location","nx.solrajax.searchresult.initUrl",function(e,t){e.path()==""&&t&&e.path(t)}]);r.constant("nx.solrajax.searchresult.templateUrl","typo3conf/ext/nxsolrajax/Resources/Public/Templates/SearchResult.html");r.config(["$routeProvider","nx.solrajax.searchresult.templateUrl",function(e,t){e.when("/search/:path*",{controller:"SearchResultCtrl",templateUrl:t,resolve:{searchResponse:r.loadSearchResults}})}]);r.controller("SearchResultCtrl",["searchResponse","$http","$location","$scope",function(e,n,r,i){i.loading=!1;i.facets=e.data.facets;i.results=e.data.result;i.search=function(){};i.select=function(e){r.path(e)};i.loadPrev=function(){i.loading=!0;n.get(i.results.prevLink).then(function(e){i.results.prevLink=e.data.result.prevLink||"";t.forEach(e.data.result.resultDocuments.reverse(),function(e){i.results.resultDocuments.unshift(e)});i.loading=!1})};i.loadNext=function(){i.loading=!0;n.get(i.results.nextLink,{cache:!0}).then(function(e){r.replace(i.results.nextLink);i.results.nextLink=e.data.result.nextLink||"";t.forEach(e.data.result.resultDocuments,function(e){i.results.resultDocuments.push(e)});i.loading=!1})}}]);r.loadSearchResults=["$location","$http",function(e,t){return t.get(e.path())}]})(window,angular);