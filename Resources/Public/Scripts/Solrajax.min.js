!function(e,t,a){"use strict";var n=t.module("nx.solrajax",["ngSanitize","ui.bootstrap.datepicker","ui.bootstrap.typeahead","nx.angular.variables"]);n.config(["$routeProvider","nxConfigurationServiceProvider",function(e,t){e.when("/ajaxsearch/:path*",{controller:"SearchResultCtrl",templateUrl:t.value("nx.solrajax.searchresult.templateUrl"),resolve:{searchResponse:["$location","$http",function(e,t){return t.get(e.path(),{params:e.search()})}]}})}]),n.controller("SearchResultCtrl",["searchResponse","$http","$location","$scope","dateFilter",function(e,a,n,r,s){r.showFacetFilters=!1,r.loading=!1,r.q=e.data.search.q||"",r.facets=e.data.facets,r.results=e.data.result,r.search=e.data.search,r.typeFacet=function(){return t.isUndefined(r.facets.availableFacets)?!1:r.facets.availableFacets.filter(function(e){return e.label?"type"===e.label.toLowerCase():!1})[0]},r.autoSuggestion=function(e){return a.get(r.search.suggestUrl,{params:{q:e.toLowerCase()}}).then(function(e){return e.data.results})},r.submitSearch=function(){var e=this.q.name||this.q;n.path(r.search.url+"?q="+e)},r.removeSearch=function(){n.path(r.search.url)},r.select=function(e){n.path(e)},r.selectDate=function(e){var t,a,r;t=e.start?s(e.start,"yyyyMMdd"):"*",a=e.end?s(e.end,"yyyyMMdd"):"*",r=e.start||e.end?decodeURI(e.url).replace(encodeURI("{filterValue}"),encodeURI(t+e.delimiter+a)):e.reseturl,n.path(r)},r.removeStartDate=function(e){e.start="",r.selectDate(e)},r.removeEndDate=function(e){e.end="",r.selectDate(e)},r.isDateSelected=function(){var e=!1;return t.forEach(r.facets.availableFacets,function(t){"queryGroup"!==t.type&&"dateRange"!==t.type||!t.active||(e=!0)}),e},r.loadPrev=function(){r.loading=!0,a.get(r.results.prevLink).then(function(e){r.results.prevLink=e.data.result.prevLink||"",t.forEach(e.data.result.resultDocuments.reverse(),function(e){r.results.resultDocuments.unshift(e)}),r.loading=!1})},r.loadNext=function(){r.loading=!0,a.get(r.results.nextLink,{cache:!0}).then(function(e){n.replace(r.results.nextLink),r.results.nextLink=e.data.result.nextLink||"",t.forEach(e.data.result.resultDocuments,function(e){r.results.resultDocuments.push(e)}),r.loading=!1})},r.isSiteActive=function(e){return r.search.site.selected===e},r.selectSite=function(e){t.isUndefined(r.search.site[e])||r.select(r.search.site[e])}}]),n.directive("nxBindResult",["$sce","$parse","$compile",function(e,t,a){return function(n,r,s){function i(){return(c(n)||"").toString()}r.addClass("ng-binding").data("$binding",s.nxBindResult);var c=t(s.nxBindResult);n.$watch(i,function u(){r.html(a(e.getTrustedHtml(e.trustAsHtml(c(n))))(n)||"")})}}])}(window,angular);
//# sourceMappingURL=./Solrajax.min.map