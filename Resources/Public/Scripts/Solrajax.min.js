!function(e,t,n){"use strict";var a=t.module("nx.solrajax",["ngSanitize","ui.bootstrap.datepicker","ui.bootstrap.typeahead","nx.angular.variables"]);a.config(["$routeProvider","nxConfigurationServiceProvider",function(e,t){e.when("/ajaxsearch/:path*",{controller:"SearchResultCtrl",templateUrl:t.value("nx.solrajax.searchresult.templateUrl"),resolve:{searchResponse:["$location","$http",function(e,t){return t.get(e.path(),{params:e.search()})}]}})}]),a.controller("SearchResultCtrl",["searchResponse","$http","$location","$scope","dateFilter",function(e,n,a,r,s){r.showFacetFilters=!1,r.loading=!1,r.q="",r.facets=e.data.facets,r.results=e.data.result,r.search=e.data.search,r.autoSuggestion=function(e){return n.get(r.search.suggestUrl,{params:{q:e.toLowerCase()}}).then(function(e){return e.data.results})},r.submitSearch=function(){var e=this.q.name||this.q;a.path(r.search.url+"?q="+e)},r.removeSearch=function(){a.path(r.search.url)},r.select=function(e){a.path(e)},r.selectDate=function(e){var t,n,r;t=e.start?s(e.start,"yyyyMMdd"):"*",n=e.end?s(e.end,"yyyyMMdd"):"*",r=e.start||e.end?decodeURI(e.url).replace(encodeURI("{filterValue}"),encodeURI(t+e.delimiter+n)):e.reseturl,a.path(r)},r.removeStartDate=function(e){e.start="",r.selectDate(e)},r.removeEndDate=function(e){e.end="",r.selectDate(e)},r.isDateSelected=function(){var e=!1;return t.forEach(r.facets.availableFacets,function(t){"queryGroup"!==t.type&&"dateRange"!==t.type||!t.active||(e=!0)}),e},r.loadPrev=function(){r.loading=!0,n.get(r.results.prevLink).then(function(e){r.results.prevLink=e.data.result.prevLink||"",t.forEach(e.data.result.resultDocuments.reverse(),function(e){r.results.resultDocuments.unshift(e)}),r.loading=!1})},r.loadNext=function(){r.loading=!0,n.get(r.results.nextLink,{cache:!0}).then(function(e){a.replace(r.results.nextLink),r.results.nextLink=e.data.result.nextLink||"",t.forEach(e.data.result.resultDocuments,function(e){r.results.resultDocuments.push(e)}),r.loading=!1})}}]),a.directive("nxBindResult",["$sce","$parse","$compile",function(e,t,n){return function(a,r,s){function u(){return(o(a)||"").toString()}r.addClass("ng-binding").data("$binding",s.nxBindResult);var o=t(s.nxBindResult);a.$watch(u,function c(t){r.html(n(e.getTrustedHtml(e.trustAsHtml(o(a))))(a)||"")})}}])}(window,angular);
//# sourceMappingURL=./Solrajax.min.map