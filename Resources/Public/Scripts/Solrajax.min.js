(function(e,t,n){"use strict";var r=t.module("nx.solrajax",["ngSanitize","ui.bootstrap.datepicker","ui.bootstrap.typeahead"]);r.constant("nx.solrajax.searchresult.templateUrl","typo3conf/ext/nxsolrajax/Resources/Public/Templates/SearchResult.html?1395144505");r.config(["$routeProvider","nx.solrajax.searchresult.templateUrl",function(e,t){e.when("/search/:path*",{controller:"SearchResultCtrl",templateUrl:t,resolve:{searchResponse:["$location","$http",function(e,t){return t.get(e.path(),{params:e.search()})}]}})}]);r.value("nx.solrajax.searchresult.initUrl","");r.run(["$location","nx.solrajax.searchresult.initUrl",function(e,t){e.path()==""&&t&&e.path(t)}]);r.controller("SearchResultCtrl",["searchResponse","$http","$location","$scope","dateFilter",function(e,n,r,i,s){i.loading=!1;i.q="";i.facets=e.data.facets;i.results=e.data.result;i.search=e.data.search;i.autoSuggestion=function(e){return n.get(i.search.suggestUrl,{params:{q:e}}).then(function(e){return e.data.results})};i.submitSearch=function(){var e=i.q.name||i.q;r.path(i.search.url+"?q="+e)};i.removeSearch=function(){r.path(i.search.url)};i.select=function(e){r.path(e)};i.selectDate=function(e){var t,n,i;t=e.start?s(e.start,"yyyyMMdd"):"*";n=e.end?s(e.end,"yyyyMMdd"):"*";!e.start&&!e.end?i=e.reseturl:i=decodeURI(e.url).replace(encodeURI("{filterValue}"),encodeURI(t+e.delimiter+n));r.path(i)};i.removeStartDate=function(e){e.start="";i.selectDate(e)};i.removeEndDate=function(e){e.end="";i.selectDate(e)};i.loadPrev=function(){i.loading=!0;n.get(i.results.prevLink).then(function(e){i.results.prevLink=e.data.result.prevLink||"";t.forEach(e.data.result.resultDocuments.reverse(),function(e){i.results.resultDocuments.unshift(e)});i.loading=!1})};i.loadNext=function(){i.loading=!0;n.get(i.results.nextLink,{cache:!0}).then(function(e){r.replace(i.results.nextLink);i.results.nextLink=e.data.result.nextLink||"";t.forEach(e.data.result.resultDocuments,function(e){i.results.resultDocuments.push(e)});i.loading=!1})}}])})(window,angular);