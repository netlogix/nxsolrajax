!function(e,t,a){"use strict";t.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(e){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(a){var i=a.match(t);if(!i)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+a+'".');return{itemName:i[3],source:e(i[4]),viewMapper:e(i[2]||i[1]),modelMapper:e(i[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(e,i,n,r,o,p,c){var d=[9,13,27,38,40];return{require:"ngModel",link:function(s,l,u,h){var m=s.$eval(u.typeaheadMinLength)||1,f=s.$eval(u.typeaheadWaitMs)||0,v=s.$eval(u.typeaheadEditable)!==!1,y=i(u.typeaheadLoading).assign||t.noop,$=i(u.typeaheadOnSelect),g=u.typeaheadInputFormatter?i(u.typeaheadInputFormatter):a,w=u.typeaheadAppendToBody?s.$eval(u.typeaheadAppendToBody):!1,x=i(u.ngModel).assign,b=c.parse(u.typeahead),M,I=s.$new();s.$on("$destroy",function(){I.$destroy()});var T="typeahead-"+I.$id+"-"+Math.floor(1e4*Math.random());l.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":T});var U=t.element("<div typeahead-popup></div>");U.attr({id:T,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),t.isDefined(u.typeaheadTemplateUrl)&&U.attr("template-url",u.typeaheadTemplateUrl);var P=function(){I.matches=[],I.activeIdx=-1,l.attr("aria-expanded",!1)},q=function(e){return T+"-option-"+e};I.$watch("activeIdx",function(e){0>e?l.removeAttr("aria-activedescendant"):l.attr("aria-activedescendant",q(e))});var _=function(e){var t={$viewValue:e};y(s,!0),n.when(b.source(s,t)).then(function(a){var i=e===h.$viewValue;if(i&&M)if(a.length>0){I.activeIdx=-1,I.matches.length=0;for(var n=0;n<a.length;n++)t[b.itemName]=a[n],I.matches.push({id:q(n),label:b.viewMapper(I,t),model:a[n]});I.query=e,I.position=w?p.offset(l):p.position(l),I.position.top=I.position.top+l.prop("offsetHeight"),l.attr("aria-expanded",!0)}else P();i&&y(s,!1)},function(){P(),y(s,!1)})};P(),I.query=a;var A,k=function(e){A=r(function(){_(e)},f)},E=function(){A&&r.cancel(A)};h.$parsers.unshift(function(e){return M=!0,e&&e.length>=m?f>0?(E(),k(e)):_(e):(y(s,!1),E(),P()),v?e:e?(h.$setValidity("editable",!1),a):(h.$setValidity("editable",!0),e)}),h.$formatters.push(function(e){var t,i,n={};return g?(n.$model=e,g(s,n)):(n[b.itemName]=e,t=b.viewMapper(s,n),n[b.itemName]=a,i=b.viewMapper(s,n),t!==i?t:e)}),I.select=function(e){var t={},a,i;-1!==e&&(t[b.itemName]=i=I.matches[e].model,a=b.modelMapper(s,t),x(s,a),h.$setValidity("editable",!0)),$(s,{$element:l,$item:i,$model:a,$label:b.viewMapper(s,t)}),P(),r(function(){l[0].focus()},0,!1)},l.bind("keydown",function(e){0!==I.matches.length&&-1!==d.indexOf(e.which)&&(e.preventDefault(),40===e.which?(I.activeIdx=(I.activeIdx+1)%I.matches.length,I.$digest()):38===e.which?(I.activeIdx=(I.activeIdx?I.activeIdx:I.matches.length)-1,I.$digest()):13===e.which||9===e.which?I.$apply(function(){I.select(I.activeIdx)}):27===e.which&&(e.stopPropagation(),P(),I.$digest()))}),l.bind("blur",function(e){M=!1});var V=function(e){l[0]!==e.target&&(P(),I.$digest())};o.bind("click",V),s.$on("$destroy",function(){o.unbind("click",V)});var N=e(U)(I);w?o.find("body").append(N):l.after(N)}}}]).value("ui.bootstrap.typeahead.typeaheadPopup.templateUrl","typo3conf/ext/nxsolrajax/Resources/Public/Templates/Typeahead/TypeaheadPopup.html").directive("typeaheadPopup",["ui.bootstrap.typeahead.typeaheadPopup.templateUrl",function(e){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:e,link:function(e,t,a){e.templateUrl=a.templateUrl,e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}}]).value("ui.bootstrap.typeahead.typeaheadMatch.templateUrl","typo3conf/ext/nxsolrajax/Resources/Public/Templates/Typeahead/TypeaheadMatch.html").directive("typeaheadMatch",["$http","$templateCache","$compile","$parse","ui.bootstrap.typeahead.typeaheadMatch.templateUrl",function(e,t,a,i,n){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(r,o,p){var c=i(p.templateUrl)(r.$parent)||n;e.get(c,{cache:t}).success(function(e){o.replaceWith(a(e.trim())(r))})}}}]).filter("typeaheadHighlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,a){return a?(""+t).replace(new RegExp(e(a),"gi"),"<strong>$&</strong>"):t}})}(window,angular);
//# sourceMappingURL=./Typeahead.min.map