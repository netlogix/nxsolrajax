!function(e,t,a){"use strict";t.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(e){var t=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(a){var i=a.match(t);if(!i)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+a+'".');return{itemName:i[3],source:e(i[4]),viewMapper:e(i[2]||i[1]),modelMapper:e(i[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(e,i,n,r,o,p,c){var l=[9,13,27,38,40];return{require:"ngModel",link:function(s,d,u,h){var m=s.$eval(u.typeaheadMinLength)||1,f=s.$eval(u.typeaheadWaitMs)||0,y=s.$eval(u.typeaheadEditable)!==!1,v=i(u.typeaheadLoading).assign||t.noop,$=i(u.typeaheadOnSelect),g=u.typeaheadInputFormatter?i(u.typeaheadInputFormatter):a,b=u.typeaheadAppendToBody?s.$eval(u.typeaheadAppendToBody):!0,x=i(u.ngModel).assign,w=c.parse(u.typeahead),M;d.attr({"aria-autocomplete":"list","aria-expanded":!1});var I=t.element("<div typeahead-popup></div>");I.attr({matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),t.isDefined(u.typeaheadTemplateUrl)&&I.attr("template-url",u.typeaheadTemplateUrl);var T=s.$new();s.$on("$destroy",function(){T.$destroy()});var U=function(){T.matches=[],T.activeIdx=-1,d.attr("aria-expanded",!1)},P=function(e){var t={$viewValue:e};v(s,!0),n.when(w.source(s,t)).then(function(a){var i=e===h.$viewValue;if(i&&M)if(a.length>0){T.activeIdx=0,T.matches.length=0;for(var n=0;n<a.length;n++)t[w.itemName]=a[n],T.matches.push({label:w.viewMapper(T,t),model:a[n]});T.query=e,T.position=b?p.offset(d):p.position(d),T.position.top=T.position.top+d.prop("offsetHeight"),d.attr("aria-expanded",!0)}else U();i&&v(s,!1)},function(){U(),v(s,!1)})};U(),T.query=a;var q;h.$parsers.unshift(function(e){return M=!0,e&&e.length>=m?f>0?(q&&r.cancel(q),q=r(function(){P(e)},f)):P(e):(v(s,!1),U()),y?e:e?(h.$setValidity("editable",!1),a):(h.$setValidity("editable",!0),e)}),h.$formatters.push(function(e){var t,i,n={};return g?(n.$model=e,g(s,n)):(n[w.itemName]=e,t=w.viewMapper(s,n),n[w.itemName]=a,i=w.viewMapper(s,n),t!==i?t:e)}),T.select=function(e){var t={},a,i;t[w.itemName]=i=T.matches[e].model,a=w.modelMapper(s,t),x(s,a),h.$setValidity("editable",!0),$(s,{$item:i,$model:a,$label:w.viewMapper(s,t)}),U(),r(function(){d[0].focus()},0,!1)},d.bind("keydown",function(e){0!==T.matches.length&&-1!==l.indexOf(e.which)&&(e.preventDefault(),40===e.which?(T.activeIdx=(T.activeIdx+1)%T.matches.length,T.$digest()):38===e.which?(T.activeIdx=(T.activeIdx?T.activeIdx:T.matches.length)-1,T.$digest()):13===e.which||9===e.which?T.$apply(function(){T.select(T.activeIdx)}):27===e.which&&(e.stopPropagation(),U(),T.$digest()))}),d.bind("blur",function(e){M=!1});var _=function(e){d[0]!==e.target&&(U(),T.$digest())};o.bind("click",_),s.$on("$destroy",function(){o.unbind("click",_)});var k=e(I)(T);b?o.find("body").append(k):d.after(k)}}}]).value("ui.bootstrap.typeahead.typeaheadPopup.templateUrl","typo3conf/ext/nxsolrajax/Resources/Public/Templates/Typeahead/TypeaheadPopup.html").directive("typeaheadPopup",["ui.bootstrap.typeahead.typeaheadPopup.templateUrl",function(e){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:e,link:function(e,t,a){e.templateUrl=a.templateUrl,e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}}]).value("ui.bootstrap.typeahead.typeaheadMatch.templateUrl","typo3conf/ext/nxsolrajax/Resources/Public/Templates/Typeahead/TypeaheadMatch.html").directive("typeaheadMatch",["$http","$templateCache","$compile","$parse","ui.bootstrap.typeahead.typeaheadMatch.templateUrl",function(e,t,a,i,n){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(r,o,p){var c=i(p.templateUrl)(r.$parent)||n;e.get(c,{cache:t}).success(function(e){o.replaceWith(a(e.trim())(r))})}}}]).filter("typeaheadHighlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,a){return a?(""+t).replace(new RegExp(e(a),"gi"),"<strong>$&</strong>"):t}})}(window,angular);
//# sourceMappingURL=./Typeahead.min.map