(function(e,t,n){"use strict";t.module("ui.bootstrap.datepicker",["ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$log","dateFilter","datepickerConfig",function(e,n,r,i,s,o,u){var a=this,f={$setViewValue:t.noop};t.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(r,s){a[r]=t.isDefined(n[r])?s<8?i(n[r])(e.$parent):e.$parent.$eval(n[r]):u[r]});t.forEach(["minDate","maxDate"],function(t){n[t]?e.$parent.$watch(r(n[t]),function(e){a[t]=e?new Date(e):null;a.refreshView()}):a[t]=u[t]?new Date(u[t]):null});e.datepickerMode=e.datepickerMode||u.datepickerMode;this.currentCalendarDate=t.isDefined(n.initDate)?e.$parent.$eval(n.initDate):new Date;this.init=function(e){f=e;f.$render=function(){a.render()}};this.render=function(){if(f.$modelValue){var e=new Date(f.$modelValue),t=!isNaN(e);t?this.currentCalendarDate=e:s.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.');f.$setValidity("date",t)}this.refreshView()};this.refreshView=function(){if(this.mode){this._refreshView();var e=f.$modelValue?new Date(f.$modelValue):null;f.$setValidity("date-disabled",!e||this.mode&&!this.isDisabled(e))}};this.createDateObject=function(e,t){var n=f.$modelValue?new Date(f.$modelValue):null;return{date:e,label:o(e,t),selected:n&&this.compare(e,n)===0,disabled:this.isDisabled(e),current:this.compare(e,new Date)===0}};this.isDisabled=function(t){return this.minDate&&this.compare(t,this.minDate)<0||this.maxDate&&this.compare(t,this.maxDate)>0||e.dateDisabled&&e.dateDisabled({date:t,mode:e.datepickerMode})};this.split=function(e,t){var n=[];while(e.length>0)n.push(e.splice(0,t));return n};e.select=function(t){if(e.datepickerMode===a.minMode){var n=f.$modelValue?new Date(f.$modelValue):new Date(0,0,0,0,0,0,0);n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate());f.$setViewValue(n);f.$render()}else{a.currentCalendarDate=t;e.datepickerMode=a.mode.previous}};e.move=function(e){var t=a.currentCalendarDate.getFullYear()+e*(a.mode.step.years||0),n=a.currentCalendarDate.getMonth()+e*(a.mode.step.months||0);a.currentCalendarDate.setFullYear(t,n,1);a.refreshView()};e.toggleMode=function(){e.datepickerMode=e.datepickerMode===a.maxMode?a.minMode:a.mode.next}}]).value("ui.bootstrap.datepicker.daypicker.templateUrl","typo3conf/ext/nxsolrajax/Resources/Public/Templates/Datepicker/Day.html").directive("daypicker",["ui.bootstrap.datepicker.daypicker.templateUrl","dateFilter",function(e,n){return{restrict:"EA",replace:!0,templateUrl:e,require:"^datepicker",link:function(e,r,i,s){function o(e,t){return(new Date(e,t,0)).getDate()}function u(e,t){var n=new Array(t),r=new Date(e),i=0;r.setHours(12);while(i<t){n[i++]=new Date(r);r.setDate(r.getDate()+1)}return n}function a(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();t.setMonth(0);t.setDate(1);return Math.floor(Math.round((n-t)/864e5)/7)+1}e.showWeeks=s.showWeeks;s.mode={step:{months:1},next:"month"};s._refreshView=function(){var r=s.currentCalendarDate.getFullYear(),i=s.currentCalendarDate.getMonth(),f=new Date(r,i,1),l=s.startingDay-f.getDay(),c=l>0?7-l:-l,h=new Date(f),p=0;if(c>0){h.setDate(-c+1);p+=c}p+=o(r,i+1);p+=(7-p%7)%7;var d=u(h,p);for(var v=0;v<p;v++)d[v]=t.extend(s.createDateObject(d[v],s.formatDay),{secondary:d[v].getMonth()!==i});e.labels=new Array(7);for(var m=0;m<7;m++)e.labels[m]=n(d[m].date,s.formatDayHeader);e.title=n(s.currentCalendarDate,s.formatDayTitle);e.rows=s.split(d,7);if(e.showWeeks){e.weekNumbers=[];var g=a(e.rows[0][0].date),y=e.rows.length;while(e.weekNumbers.push(g++)<y);}};s.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())};s.refreshView()}}}]).value("ui.bootstrap.datepicker.monthpicker.templateUrl","typo3conf/ext/nxsolrajax/Resources/Public/Templates/Datepicker/Month.html").directive("monthpicker",["ui.bootstrap.datepicker.monthpicker.templateUrl","dateFilter",function(e,t){return{restrict:"EA",replace:!0,templateUrl:e,require:"^datepicker",link:function(e,n,r,i){i.mode={step:{years:1},previous:"day",next:"year"};i._refreshView=function(){var n=new Array(12),r=i.currentCalendarDate.getFullYear();for(var s=0;s<12;s++)n[s]=i.createDateObject(new Date(r,s,1),i.formatMonth);e.title=t(i.currentCalendarDate,i.formatMonthTitle);e.rows=i.split(n,3)};i.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())};i.refreshView()}}}]).value("ui.bootstrap.datepicker.yearpicker.templateUrl","typo3conf/ext/nxsolrajax/Resources/Public/Templates/Datepicker/Year.html").directive("yearpicker",["ui.bootstrap.datepicker.yearpicker.templateUrl","dateFilter",function(e,t){return{restrict:"EA",replace:!0,templateUrl:e,require:"^datepicker",link:function(e,t,n,r){r.mode={step:{years:r.yearRange},previous:"month"};r._refreshView=function(){var t=this.mode.step.years,n=new Array(t),i=parseInt((r.currentCalendarDate.getFullYear()-1)/t,10)*t+1;for(var s=0;s<t;s++)n[s]=r.createDateObject(new Date(i+s,0,1),r.formatYear);e.title=[n[0].label,n[t-1].label].join(" - ");e.rows=r.split(n,5)};r.compare=function(e,t){return e.getFullYear()-t.getFullYear()};r.refreshView()}}}]).value("ui.bootstrap.datepicker.datepicker.templateUrl","typo3conf/ext/nxsolrajax/Resources/Public/Templates/Datepicker/Datepicker.html").directive("datepicker",["ui.bootstrap.datepicker.datepicker.templateUrl",function(e){return{restrict:"EA",replace:!0,templateUrl:e,scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(e,t,n,r){var i=r[0],s=r[1];s&&i.init(s)}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","datepickerPopupConfig",function(e,r,i,s,o,u){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@"},link:function(a,f,l,c){function m(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function y(e){if(!e){c.$setValidity("date",!0);return null}if(t.isDate(e)&&!isNaN(e)){c.$setValidity("date",!0);return e}if(t.isString(e)){var r=new Date(e);if(isNaN(r)){c.$setValidity("date",!1);return n}c.$setValidity("date",!0);return r}c.$setValidity("date",!1);return n}var h,p=t.isDefined(l.closeOnDateSelection)?a.$parent.$eval(l.closeOnDateSelection):u.closeOnDateSelection,d=t.isDefined(l.datepickerAppendToBody)?a.$parent.$eval(l.datepickerAppendToBody):u.appendToBody;a.showButtonBar=t.isDefined(l.showButtonBar)?a.$parent.$eval(l.showButtonBar):u.showButtonBar;a.getText=function(e){return a[e+"Text"]||u[e+"Text"]};l.$observe("datepickerPopup",function(e){h=e||u.datepickerPopup;c.$render()});var v=t.element("<div datepicker-popup-wrap><div datepicker></div></div>");v.attr({"ng-model":"date","ng-change":"dateSelection()"});var g=t.element(v.children()[0]);l.datepickerOptions&&t.forEach(a.$parent.$eval(l.datepickerOptions),function(e,t){g.attr(m(t),e)});t.forEach(["minDate","maxDate"],function(e){if(l[e]){a.$parent.$watch(r(l[e]),function(t){a[e]=t});g.attr(m(e),e)}});l.dateDisabled&&g.attr("date-disabled",l.dateDisabled);c.$parsers.unshift(y);a.dateSelection=function(e){t.isDefined(e)&&(a.date=e);c.$setViewValue(a.date);c.$render();p&&(a.isOpen=!1)};f.bind("input change keyup",function(){a.$apply(function(){a.date=c.$modelValue})});c.$render=function(){var e=c.$viewValue?o(c.$viewValue,h):"";f.val(e);a.date=y(c.$modelValue)};var b=function(e){a.isOpen&&e.target!==f[0]&&a.$apply(function(){a.isOpen=!1})},w=function(){a.$apply(function(){a.isOpen=!0})};a.$watch("isOpen",function(e){if(e){a.position=d?s.offset(f):s.position(f);a.position.top=a.position.top+f.prop("offsetHeight");i.bind("click",b);f.unbind("focus",w);f[0].focus()}else{i.unbind("click",b);f.bind("focus",w)}});a.select=function(e){if(e==="today"){var n=new Date;if(t.isDate(c.$modelValue)){e=new Date(c.$modelValue);e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate())}else e=new Date(n.setHours(0,0,0,0))}a.dateSelection(e)};var E=e(v)(a);d?i.find("body").append(E):f.after(E);a.$on("$destroy",function(){E.remove();f.unbind("focus",w);i.unbind("click",b)})}}}]).value("ui.bootstrap.datepicker.datepickerPopupWrap.templateUrl","typo3conf/ext/nxsolrajax/Resources/Public/Templates/Datepicker/Popup.html").directive("datepickerPopupWrap",["ui.bootstrap.datepicker.datepickerPopupWrap.templateUrl",function(e){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:e,link:function(e,t,n){t.bind("click",function(e){e.preventDefault();e.stopPropagation()})}}}])})(window,angular);