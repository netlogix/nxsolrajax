!function(e,t,a){"use strict";t.module("ui.bootstrap.datepicker",["ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$log","dateFilter","datepickerConfig",function(e,a,r,n,i,o,l){var c=this,s={$setViewValue:t.noop};t.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(r,i){c[r]=t.isDefined(a[r])?8>i?n(a[r])(e.$parent):e.$parent.$eval(a[r]):l[r]}),t.forEach(["minDate","maxDate"],function(t){a[t]?e.$parent.$watch(r(a[t]),function(e){c[t]=e?new Date(e):null,c.refreshView()}):c[t]=l[t]?new Date(l[t]):null}),e.datepickerMode=e.datepickerMode||l.datepickerMode,this.currentCalendarDate=t.isDefined(a.initDate)?e.$parent.$eval(a.initDate):new Date,this.init=function(e){s=e,s.$render=function(){c.render()}},this.render=function(){if(s.$modelValue){var e=new Date(s.$modelValue),t=!isNaN(e);t?this.currentCalendarDate=e:i.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),s.$setValidity("date",t)}this.refreshView()},this.refreshView=function(){if(this.mode){this._refreshView();var e=s.$modelValue?new Date(s.$modelValue):null;s.$setValidity("date-disabled",!e||this.mode&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var a=s.$modelValue?new Date(s.$modelValue):null;return{date:e,label:o(e,t),selected:a&&0===this.compare(e,a),disabled:this.isDisabled(e),current:0===this.compare(e,new Date)}},this.isDisabled=function(t){return this.minDate&&this.compare(t,this.minDate)<0||this.maxDate&&this.compare(t,this.maxDate)>0||e.dateDisabled&&e.dateDisabled({date:t,mode:e.datepickerMode})},this.split=function(e,t){for(var a=[];e.length>0;)a.push(e.splice(0,t));return a},e.select=function(t){if(e.datepickerMode===c.minMode){var a=s.$modelValue?new Date(s.$modelValue):new Date(0,0,0,0,0,0,0);a.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),s.$setViewValue(a),s.$render()}else c.currentCalendarDate=t,e.datepickerMode=c.mode.previous},e.move=function(e){var t=c.currentCalendarDate.getFullYear()+e*(c.mode.step.years||0),a=c.currentCalendarDate.getMonth()+e*(c.mode.step.months||0);c.currentCalendarDate.setFullYear(t,a,1),c.refreshView()},e.toggleMode=function(){e.datepickerMode=e.datepickerMode===c.maxMode?c.minMode:c.mode.next}}]).value("ui.bootstrap.datepicker.daypicker.templateUrl","typo3conf/ext/nxsolrajax/Resources/Public/Templates/Datepicker/Day.html").directive("daypicker",["ui.bootstrap.datepicker.daypicker.templateUrl","dateFilter",function(e,a){return{restrict:"EA",replace:!0,templateUrl:e,require:"^datepicker",link:function(e,r,n,i){function o(e,t){return new Date(e,t,0).getDate()}function l(e,t){var a=new Array(t),r=new Date(e),n=0;for(r.setHours(12);t>n;)a[n++]=new Date(r),r.setDate(r.getDate()+1);return a}function c(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var a=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((a-t)/864e5)/7)+1}e.showWeeks=i.showWeeks,i.mode={step:{months:1},next:"month"},i._refreshView=function(){var r=i.currentCalendarDate.getFullYear(),n=i.currentCalendarDate.getMonth(),s=new Date(r,n,1),d=i.startingDay-s.getDay(),p=d>0?7-d:-d,u=new Date(s),f=0;p>0&&(u.setDate(-p+1),f+=p),f+=o(r,n+1),f+=(7-f%7)%7;for(var m=l(u,f),D=0;f>D;D++)m[D]=t.extend(i.createDateObject(m[D],i.formatDay),{secondary:m[D].getMonth()!==n});e.labels=new Array(7);for(var h=0;7>h;h++)e.labels[h]=a(m[h].date,i.formatDayHeader);if(e.title=a(i.currentCalendarDate,i.formatDayTitle),e.rows=i.split(m,7),e.showWeeks){e.weekNumbers=[];for(var k=c(e.rows[0][0].date),y=e.rows.length;e.weekNumbers.push(k++)<y;);}},i.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},i.refreshView()}}}]).value("ui.bootstrap.datepicker.monthpicker.templateUrl","typo3conf/ext/nxsolrajax/Resources/Public/Templates/Datepicker/Month.html").directive("monthpicker",["ui.bootstrap.datepicker.monthpicker.templateUrl","dateFilter",function(e,t){return{restrict:"EA",replace:!0,templateUrl:e,require:"^datepicker",link:function(e,a,r,n){n.mode={step:{years:1},previous:"day",next:"year"},n._refreshView=function(){for(var a=new Array(12),r=n.currentCalendarDate.getFullYear(),i=0;12>i;i++)a[i]=n.createDateObject(new Date(r,i,1),n.formatMonth);e.title=t(n.currentCalendarDate,n.formatMonthTitle),e.rows=n.split(a,3)},n.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},n.refreshView()}}}]).value("ui.bootstrap.datepicker.yearpicker.templateUrl","typo3conf/ext/nxsolrajax/Resources/Public/Templates/Datepicker/Year.html").directive("yearpicker",["ui.bootstrap.datepicker.yearpicker.templateUrl","dateFilter",function(e,t){return{restrict:"EA",replace:!0,templateUrl:e,require:"^datepicker",link:function(e,t,a,r){r.mode={step:{years:r.yearRange},previous:"month"},r._refreshView=function(){for(var t=this.mode.step.years,a=new Array(t),n=parseInt((r.currentCalendarDate.getFullYear()-1)/t,10)*t+1,i=0;t>i;i++)a[i]=r.createDateObject(new Date(n+i,0,1),r.formatYear);e.title=[a[0].label,a[t-1].label].join(" - "),e.rows=r.split(a,5)},r.compare=function(e,t){return e.getFullYear()-t.getFullYear()},r.refreshView()}}}]).value("ui.bootstrap.datepicker.datepicker.templateUrl","typo3conf/ext/nxsolrajax/Resources/Public/Templates/Datepicker/Datepicker.html").directive("datepicker",["ui.bootstrap.datepicker.datepicker.templateUrl",function(e){return{restrict:"EA",replace:!0,templateUrl:e,scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(e,t,a,r){var n=r[0],i=r[1];i&&n.init(i)}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!0,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","datepickerPopupConfig",function(e,r,n,i,o,l){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@"},link:function(c,s,d,p){function u(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function f(e){if(e){if(t.isDate(e)&&!isNaN(e))return p.$setValidity("date",!0),e;if(t.isString(e)){var r=new Date(e);return isNaN(r)?(p.$setValidity("date",!1),a):(p.$setValidity("date",!0),r)}return p.$setValidity("date",!1),a}return p.$setValidity("date",!0),null}var m,D=t.isDefined(d.closeOnDateSelection)?c.$parent.$eval(d.closeOnDateSelection):l.closeOnDateSelection,h=t.isDefined(d.datepickerAppendToBody)?c.$parent.$eval(d.datepickerAppendToBody):l.appendToBody;c.showButtonBar=t.isDefined(d.showButtonBar)?c.$parent.$eval(d.showButtonBar):l.showButtonBar,c.getText=function(e){return c[e+"Text"]||l[e+"Text"]},d.$observe("datepickerPopup",function(e){m=e||l.datepickerPopup,p.$render()});var k=t.element("<div datepicker-popup-wrap><div datepicker></div></div>");k.attr({"ng-model":"date","ng-change":"dateSelection()"});var y=t.element(k.children()[0]);d.datepickerOptions&&t.forEach(c.$parent.$eval(d.datepickerOptions),function(e,t){y.attr(u(t),e)}),t.forEach(["minDate","maxDate"],function(e){d[e]&&(c.$parent.$watch(r(d[e]),function(t){c[e]=t}),y.attr(u(e),e))}),d.dateDisabled&&y.attr("date-disabled",d.dateDisabled),p.$parsers.unshift(f),c.dateSelection=function(e){t.isDefined(e)&&(c.date=e),p.$setViewValue(c.date),p.$render(),D&&(c.isOpen=!1)},s.bind("input change keyup",function(){c.$apply(function(){c.date=p.$modelValue})}),p.$render=function(){var e=p.$viewValue?o(p.$viewValue,m):"";s.val(e),c.date=f(p.$modelValue)};var w=function(e){c.isOpen&&e.target!==s[0]&&c.$apply(function(){c.isOpen=!1})},$=function(){c.$apply(function(){c.isOpen=!0})};c.$watch("isOpen",function(e){e?(c.position=h?i.offset(s):i.position(s),c.position.top=c.position.top+s.prop("offsetHeight"),n.bind("click",w),s.unbind("focus",$),s[0].focus()):(n.unbind("click",w),s.bind("focus",$))}),c.select=function(e){if("today"===e){var a=new Date;t.isDate(p.$modelValue)?(e=new Date(p.$modelValue),e.setFullYear(a.getFullYear(),a.getMonth(),a.getDate())):e=new Date(a.setHours(0,0,0,0))}c.dateSelection(e)};var g=e(k)(c);h?n.find("body").append(g):s.after(g),c.$on("$destroy",function(){g.remove(),s.unbind("focus",$),n.unbind("click",w)})}}}]).value("ui.bootstrap.datepicker.datepickerPopupWrap.templateUrl","typo3conf/ext/nxsolrajax/Resources/Public/Templates/Datepicker/Popup.html").directive("datepickerPopupWrap",["ui.bootstrap.datepicker.datepickerPopupWrap.templateUrl",function(e){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:e,link:function(e,t,a){t.bind("click",function(e){e.preventDefault(),e.stopPropagation()})}}}])}(window,angular);
//# sourceMappingURL=./Datepicker.min.map